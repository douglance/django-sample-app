{% extends "mentorfinder/base.html" %}

{% block title %}Find Mentor{% endblock %}
{% block content %}

<h1>Find your Mentor</h1>
<p class="lead">Pick your mentor</p>

<form method="post" id="mentorForm" data-mentor-url="{% url 'load-mentors' %}" novalidate>
	{% csrf_token %}
	{{ form.non_field_errors }}
	<div class="form-group">
		{{ form.mentor.errors }}
		{{ form.mentor.label_tag }}
		{{ form.mentor }}
	</div>
	<div class="form-group form-check">
		{{ form.available.errors }}
		{{ form.available }}
		<label for="{{ form.available.id_for_label }}">Available weekends</label>
	</div>
	<button type="submit" class="btn btn-primary">Find</button>
</form>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>

function fetchMentors(){
	var url = $("#mentorForm").attr("data-mentor-url");
	var available = $("#id_available").is(':checked');
	if (available){
		available = 'True'
	} else {
		available = 'False'
	}
	$.ajax({
		url: url,
		data: {
			'available': available
		},
		success: function (data) {
			$("#id_mentor").html(data);
		}
	})
}

$(function() {
	fetchMentors()
});

$("input:checkbox").change(function () {
	fetchMentors()
});

</script>
{% endblock %}
