{% extends "mentorfinder/base.html" %}

{% block title %}Find Mentor{% endblock %}
{% block content %}

<h1>Find your Mentor</h1>
<p class="lead">Pick your mentor</p>

<form method="post" id="mentorForm" data-mentor-url="{% url 'load-mentors' %}" novalidate>
	{% csrf_token %}
	{{ form.non_field_errors }}
	<div class="form-group">
		{{ form.mentor.errors }}
		{{ form.mentor.label_tag }}
		{{ form.mentor }}
	</div>
	<div class="form-group form-check">
		{{ form.available.errors }}
		{{ form.available }}
		<label for="{{ form.available.id_for_label }}">Available weekends</label>
	</div>
	<button type="submit" class="btn btn-primary">Find</button>
</form>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
$("input:checkbox").change(function () {
      var url = $("#mentorForm").attr("data-mentor-url");
			console.log(url)
      var available = $(this).is(':checked');
			if (available){
				available = 'True'
			} else {
				available = 'False'
			}
      $.ajax({
        url: url,
        data: {
          'available': available
        },
        success: function (data) {
          $("#id_mentor").html(data);
        }
      });
    });
</script>
{% endblock %}
